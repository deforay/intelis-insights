services:
  qdrant:
    image: qdrant/qdrant:latest
    container_name: intelis-qdrant
    ports:
      - "6333:6333"
    volumes:
      - ./qdrant_storage:/qdrant/storage

  rag-api:
    build: ./rag-api
    container_name: intelis-rag-api
    environment:
      QDRANT_URL: http://qdrant:6333
      EMBEDDING_MODEL: ${EMBEDDING_MODEL:-BAAI/bge-small-en-v1.5}
    ports:
      - "8089:8089"
    depends_on:
      - qdrant
    restart: on-failure
